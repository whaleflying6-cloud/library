<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>å€Ÿä¹¦/è¿˜ä¹¦ç®¡ç†</title>
    <style>
        table { border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    </style>
</head>
<body>

<h2>ğŸ“š å€Ÿä¹¦ç®¡ç†</h2>

<!-- å€Ÿä¹¦è¡¨å• -->
<form method="post" action="/borrow/borrow">
    <h3>å€Ÿä¹¦æ“ä½œ</h3>

    é€‰æ‹©è¯»è€…ï¼š
    <select name="reader_id" required>
        <option value="">--é€‰æ‹©è¯»è€…--</option>
        {% for reader in readers %}
        <option value="{{ reader.id }}">{{ reader.name }} ({{ reader.student_no }})</option>
        {% endfor %}
    </select><br><br>

    é€‰æ‹©å›¾ä¹¦ï¼š
    <select name="book_id" required>
        <option value="">--é€‰æ‹©å›¾ä¹¦--</option>
        {% for book in books %}
        <option value="{{ book.id }}">{{ book.title }} (å‰©ä½™: {{ book.available_count }})</option>
        {% endfor %}
    </select><br><br>

    <button type="submit">ç¡®è®¤å€Ÿä¹¦</button>
</form>

<hr>

<!-- å½“å‰å€Ÿé˜…è®°å½• -->
<h3>å½“å‰å€Ÿé˜…ä¸­çš„å›¾ä¹¦</h3>
{% if records %}
<table>
    <tr>
        <th>è®°å½•ID</th>
        <th>è¯»è€…</th>
        <th>å›¾ä¹¦</th>
        <th>å€Ÿä¹¦æ—¥æœŸ</th>
        <th>åº”è¿˜æ—¥æœŸ</th>
        <th>æ“ä½œ</th>
    </tr>
    {% for record in records %}
    <tr>
        <td>{{ record.id }}</td>
        <td>{{ record.name }}</td>
        <td>{{ record.title }}</td>
        <td>{{ record.borrow_date }}</td>
        <td>{{ record.due_date }}</td>
        <td><a href="/borrow/return/{{ record.id }}">è¿˜ä¹¦</a></td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>æš‚æ— å€Ÿé˜…è®°å½•</p>
{% endif %}

<br>
<a href="/">â¬… è¿”å›é¦–é¡µ</a>

</body>
</html>